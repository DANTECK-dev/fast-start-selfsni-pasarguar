# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Self SNI + Pasarguard Node

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ —Å GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**‚ö†Ô∏è –í–ê–ñ–ù–û**: –ó–∞–º–µ–Ω–∏—Ç–µ `DANTECK-dev/fast-start-selfsni-pasarguar` –Ω–∞ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!

```bash
# –ó–∞–ø—É—Å–∫ –µ–¥–∏–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
sudo bash <(curl -Ls https://raw.githubusercontent.com/DANTECK-dev/fast-start-selfsni-pasarguar/refs/heads/main/selfsni-xray-pasarguard.sh?token=GHSAT0AAAAAADOMO2FGTU36N3QDQDB7GACI2ILSIXA)
```

–ò–ª–∏ —Å–∫–∞—á–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å:
```bash
curl -Ls https://raw.githubusercontent.com/DANTECK-dev/fast-start-selfsni-pasarguar/refs/heads/main/selfsni-xray-pasarguard.sh?token=GHSAT0AAAAAADOMO2FGTU36N3QDQDB7GACI2ILSIXA -o /tmp/setup.sh
sudo bash /tmp/setup.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /tmp
git clone https://github.com/DANTECK-dev/fast-start-selfsni-pasarguar.git
cd REPO/pasarguard-node-conf
sudo bash selfsni-xray-pasarguard.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä (SCP)

```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
scp pasarguard-node-conf/selfsni-xray-pasarguard.sh root@YOUR_SERVER:/tmp/
scp pasarguard-node-conf/fakesite.sh root@YOUR_SERVER:/tmp/
scp pasarguard-node-conf/pg-node.sh root@YOUR_SERVER:/tmp/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /tmp
sudo bash selfsni-xray-pasarguard.sh
```

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å

1. **–î–æ–º–µ–Ω** —Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π A-–∑–∞–ø–∏—Å—å—é –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞
2. **Root –¥–æ—Å—Ç—É–ø** (sudo)
3. **–°–≤–æ–±–æ–¥–Ω—ã–µ –ø–æ—Ä—Ç—ã**: 80, 443

## üíª –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç `selfsni-xray-pasarguard.sh`

1. ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Self SNI (nginx + SSL) —á–µ—Ä–µ–∑ `fakesite.sh`
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥ Nginx (–¥–æ–±–∞–≤–ª—è–µ—Ç reuseport, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π listen)
3. ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Pasarguard Node —á–µ—Ä–µ–∑ `pg-node.sh`
4. ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Firewall (UFW):
   - –û—Ç–∫–ª—é—á–∞–µ—Ç ping (ICMP)
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç 443 (Xray Reality)
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç 80 (Let's Encrypt)
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç Pasarguard Node
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç SSH –ø–æ—Ä—Ç
   - –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã

## ‚öôÔ∏è –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–°–∫—Ä–∏–ø—Ç —Å–ø—Ä–æ—Å–∏—Ç:

1. **–î–æ–º–µ–Ω** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `ses-1.onesuper.ru`)
2. **–ü–æ—Ä—Ç Pasarguard Node** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `62050`)

## üì¶ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ (`pasarguard-node-conf`) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –Ω–∞ GitHub:

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd pasarguard-node-conf

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
bash init-github.sh
```

–°–∫—Ä–∏–ø—Ç:
1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ó–∞–ø—Ä–æ—Å–∏—Ç URL –≤–∞—à–µ–≥–æ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç remote
4. –°–æ–∑–¥–∞—Å—Ç –ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub, –∑–∞—Ç–µ–º:
git push -u origin main
```

**–í–∞–∂–Ω–æ**: –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (VPN_SERVICE_MVP) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ GitLab –∏ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç `pasarguard-node-conf/.git/` –≤ —Å–≤–æ–π `.gitignore`.

## üîß –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Pasarguard Panel:

1. **–Ø–¥—Ä–∞ (Cores)** ‚Üí **–®–∞–±–ª–æ–Ω—ã (Templates)**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `xray.json`
   - **‚ö†Ô∏è –í–ê–ñ–ù–û**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —à–∞–±–ª–æ–Ω–µ:
     - **Port**: `443` (–ù–ï 8443!)
     - **Listen**: `0.0.0.0` (–≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø)
     - **Dest**: `127.0.0.1:443` (nginx –Ω–∞ localhost)
     - **SNI**: `–≤–∞—à_–¥–æ–º–µ–Ω` (–∏–∑–º–µ–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥–µ)

2. **–£–∑–ª—ã (Nodes)**
   - –ü—Ä–∏–≤—è–∂–∏—Ç–µ —à–∞–±–ª–æ–Ω –∫ —É–∑–ª—É
   - –£–∫–∞–∂–∏—Ç–µ Service Port (–ø–æ—Ä—Ç Pasarguard Node, –Ω–µ 443!)

### –ü—Ä–æ–≤–µ—Ä–∫–∞:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx
sudo systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–∞
curl https://–≤–∞—à_–¥–æ–º–µ–Ω

# –ü—Ä–æ–≤–µ—Ä–∫–∞ firewall
sudo ufw status
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VLESS Reality Self SNI

### ‚ö†Ô∏è –í–ê–ñ–ù–û: Self SNI –¥–ª—è –æ–±—Ö–æ–¥–∞ DPI –≤ –†–§

–î–ª—è –æ–±—Ö–æ–¥–∞ DPI –≤ –†–§ **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ** –º–∞—Å–∫–∏—Ä–æ–≤–∫—É –ø–æ–¥ —á—É–∂–∏–µ –¥–æ–º–µ–Ω—ã (microsoft.com, apple.com –∏ —Ç.–¥.) - DPI –±—ã—Å—Ç—Ä–æ –∏—Ö –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–∞ –¢–°–ü–£.

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Self SNI** - —Å–≤–æ–π –ø–æ–¥–¥–æ–º–µ–Ω —Å —Ä–µ–∞–ª—å–Ω—ã–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º:
- –î–æ–º–µ–Ω: `grs-1.onesuper.ru`
- IP: `167.17.182.79`
- DNS –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ —ç—Ç–æ—Ç IP
- –ù—É–∂–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)

### –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **Xray** —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 443 (–≤–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, 0.0.0.0:443)
2. **Nginx** —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 443 (localhost, 127.0.0.1:443) —Å —Ä–µ–∞–ª—å–Ω—ã–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
3. **Reality** –º–∞—Å–∫–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –ø–æ–¥ —Å–≤–æ–π –∂–µ –¥–æ–º–µ–Ω (`grs-1.onesuper.ru`)
4. **DNS** —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (167.17.182.79)
5. **Self SNI**: DPI –≤–∏–¥–∏—Ç —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω —Å —Ä–µ–∞–ª—å–Ω—ã–º SSL - —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π HTTPS —Ç—Ä–∞—Ñ–∏–∫

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Reality –¥–ª—è Self SNI:

- **dest**: `127.0.0.1:443` - –∞–¥—Ä–µ—Å nginx —Å SSL (–ª–æ–∫–∞–ª—å–Ω—ã–π, –ù–ï 8080!)
- **serverNames**: **–¢–û–õ–¨–ö–û** `["grs-1.onesuper.ru"]` - –≤–∞—à –¥–æ–º–µ–Ω (Self SNI)
- **publicKey** –∏ **privateKey**: –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ Pasarguard –∏–ª–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–∏
- **shortIds**: –∫–æ—Ä–æ—Ç–∫–∏–µ ID –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –Ω–æ –æ–¥–∏–Ω –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)

**–ü–æ—á–µ–º—É dest: 127.0.0.1:443?**
- Xray —Å–ª—É—à–∞–µ—Ç –Ω–∞ 0.0.0.0:443 (–≤–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- Nginx —Å–ª—É—à–∞–µ—Ç –Ω–∞ 127.0.0.1:443 (localhost) —Å —Ä–µ–∞–ª—å–Ω—ã–º SSL
- Reality –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –Ω–∞ nginx —Å SSL, —á—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ä–µ–∞–ª—å–Ω—ã–π HTTPS —Ç—Ä–∞—Ñ–∏–∫

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Pasarguard Panel

### –®–∞–≥ 1: –Ø–¥—Ä–∞ (Cores) ‚Üí –®–∞–±–ª–æ–Ω—ã (Templates)

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
2. –ù–∞–∑–≤–∞–Ω–∏–µ: `VLESS Reality Self SNI`
3. –í—Å—Ç–∞–≤—å—Ç–µ JSON –∏–∑ `xray.json`
4. **–ò–∑–º–µ–Ω–∏—Ç–µ** `serverNames` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 2: –£–∑–ª—ã (Nodes)

1. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —É–∑–µ–ª (Node)
2. –ü—Ä–∏–≤—è–∂–∏—Ç–µ —à–∞–±–ª–æ–Ω –∏–∑ –®–∞–≥–∞ 1
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–∑–µ–ª –æ–Ω–ª–∞–π–Ω

### –®–∞–≥ 3: –•–æ—Å—Ç—ã (Hosts)

**–í–ê–ñ–ù–û**: –î–ª—è —Ä–∞–±–æ—Ç—ã VLESS Reality **–ù–ï–û–ë–•–û–î–ò–ú–û —Å–æ–∑–¥–∞—Ç—å —Ö–æ—Å—Ç**, –¥–∞–∂–µ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π outbound.

1. –°–æ–∑–¥–∞–π—Ç–µ —Ö–æ—Å—Ç:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: `Direct Connection` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
   - –¢–∏–ø: `Freedom`
   - Tag: `direct`
   - **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Mux**: –ù–ï –ù–£–ñ–ù–û –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ)
     - Mux –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –Ω–æ –¥–ª—è VLESS Reality —ç—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
     - Mux –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É
     - –ï—Å–ª–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Mux, –ª—É—á—à–µ —Ç–∞–∫ –∏ –æ—Å—Ç–∞–≤–∏—Ç—å

**–ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω —Ö–æ—Å—Ç?**
- Pasarguard Panel —Ç—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è —Ö–æ—Å—Ç–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —à–∞–±–ª–æ–Ω–∞
- –î–∞–∂–µ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä—è–º–æ–π outbound (freedom), —Ö–æ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≥—Ä—É–ø–ø–µ

### –®–∞–≥ 4: –ì—Ä—É–ø–ø—ã (Groups)

1. –°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `VLESS Reality Group`)
2. –í–∫–ª—é—á–∏—Ç–µ inbound —Å —Ç–µ–≥–æ–º –∏–∑ —à–∞–±–ª–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `SEs-1-VLESS` –∏–ª–∏ `GRs-1-VLESS`)
3. –ü—Ä–∏–≤—è–∂–∏—Ç–µ outbound —Å —Ç–µ–≥–æ–º `direct` (–∏–∑ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞)
   - –•–æ—Å—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã!

### –®–∞–≥ 5: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Users)

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ü—Ä–∏–≤—è–∂–∏—Ç–µ –∫ –≥—Ä—É–ø–ø–µ –∏–∑ –®–∞–≥–∞ 4
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã
sudo ss -tlnp | grep :443

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx
sudo systemctl status nginx
curl -k https://127.0.0.1:443 -H "Host: grs-1.onesuper.ru"

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Å–∞–π—Ç
curl https://grs-1.onesuper.ru

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Xray
sudo tail -f /var/log/xray/access.log
sudo tail -f /var/log/xray/error.log

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ nginx
sudo tail -f /var/log/nginx/reality-error.log
```

### –í –∫–ª–∏–µ–Ω—Ç–µ:

1. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –∫–ª–∏–µ–Ω—Ç (v2rayN, v2rayNG –∏ —Ç.–¥.)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Ö–æ–¥–∏—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞ 443

**–ü—Ä–æ–±–ª–µ–º–∞**: –í Linux –Ω–µ–ª—å–∑—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–ª—É—à–∞—Ç—å –Ω–∞ `0.0.0.0:443` –∏ `127.0.0.1:443` - –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø–æ—Ä—Ç.

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `reuseport` –≤ Nginx –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ—Ä—Ç–∞.

**–ü–æ—Ä—è–¥–æ–∫ –∑–∞–ø—É—Å–∫–∞**:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ** (Nginx –∏ Xray)
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Nginx**: `systemctl start nginx`
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Xray** (—á–µ—Ä–µ–∑ Pasarguard Panel –∏–ª–∏ `pg-node up`)

**–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—è–¥–æ–∫:
1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ**
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Xray** (—á–µ—Ä–µ–∑ Pasarguard Panel –∏–ª–∏ `pg-node up`)
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Nginx**: `systemctl start nginx`

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
ss -lptn 'sport = :443'
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
LISTEN 0    4096   0.0.0.0:443      0.0.0.0:*      users:(("xray",...))
LISTEN 0    511    127.0.0.1:443    0.0.0.0:*      users:(("nginx",...))
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤ 443
**–°–∏–º–ø—Ç–æ–º**: `bind: address already in use` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Xray –∏–ª–∏ Nginx

**–ü—Ä–∏—á–∏–Ω–∞**: –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –ø—ã—Ç–∞—é—Ç—Å—è —Å–ª—É—à–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–º –∞–¥—Ä–µ—Å–µ.

**–†–µ—à–µ–Ω–∏–µ**: 
- Xray –¥–æ–ª–∂–µ–Ω —Å–ª—É—à–∞—Ç—å –Ω–∞ `0.0.0.0:443` (–≤–Ω–µ—à–Ω–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- Nginx –¥–æ–ª–∂–µ–Ω —Å–ª—É—à–∞—Ç—å –Ω–∞ `127.0.0.1:443` (—Ç–æ–ª—å–∫–æ localhost)
- –û–Ω–∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç, —Ç–∞–∫ –∫–∞–∫ —Ä–∞–∑–Ω—ã–µ bind-address

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
sudo bash pasarguard-node-conf/fix-port-conflict.sh
```

**–†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   sudo grep -r "listen.*443" /etc/nginx/sites-enabled/
   ```
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `listen 127.0.0.1:443` (–ù–ï `0.0.0.0:443` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ `:443`)

2. **–ò—Å–ø—Ä–∞–≤—å—Ç–µ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   # –ï—Å–ª–∏ –Ω–∞—à–ª–∏ listen 0.0.0.0:443 –∏–ª–∏ :443, –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:
   sudo sed -i 's/listen 0\.0\.0\.0:443/listen 127.0.0.1:443/g' /etc/nginx/sites-enabled/*.conf
   sudo sed -i 's/listen :443 ssl/listen 127.0.0.1:443 ssl/g' /etc/nginx/sites-enabled/*.conf
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Xray –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ Pasarguard Panel:**
   - Port: `443` (–ù–ï 8443!)
   - Listen: `0.0.0.0`

4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   sudo systemctl restart nginx
   sudo pg-node restart
   # –∏–ª–∏
   cd /opt/pg-node && sudo docker compose restart
   ```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```bash
   sudo ss -tlnp | grep :443
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   # LISTEN 0    4096   0.0.0.0:443      0.0.0.0:*    users:(("xray",...))
   # LISTEN 0    511    127.0.0.1:443    0.0.0.0:*    users:(("nginx",...))
   ```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
**–°–∏–º–ø—Ç–æ–º**: Nginx –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π "SSL certificate not found"
**–†–µ—à–µ–Ω–∏–µ**: 
```bash
sudo certbot certonly --webroot -w /var/www/html -d grs-1.onesuper.ru
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–∞–π—Ç –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω
**–°–∏–º–ø—Ç–æ–º**: `curl https://grs-1.onesuper.ru` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS: `dig grs-1.onesuper.ru`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall: `sudo ufw allow 443/tcp`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx: `sudo systemctl status nginx`

### –ü—Ä–æ–±–ª–µ–º–∞ 4: VLESS Reality –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–°–∏–º–ø—Ç–æ–º**: –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `dest`: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `127.0.0.1:443`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `serverNames`: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞—à –¥–æ–º–µ–Ω (Self SNI)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Xray –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ö–æ—Å—Ç —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –≥—Ä—É–ø–ø–µ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—â–∏—Ç—ã –æ—Ç DPI/–†–ö–ù

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Xray
sudo grep -A 10 '"realitySettings"' /opt/pg-node/xray/config.json

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Nginx
sudo nginx -t
sudo systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
sudo ss -tlnp | grep -E ":(80|443) "

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot certificates
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚úÖ Reality –≤–∫–ª—é—á–µ–Ω (`"security": "reality"`)
- ‚úÖ Fingerprint Chrome (`"fingerprint": "chrome"`)
- ‚úÖ Dest –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (`"dest": "127.0.0.1:443"`)
- ‚úÖ ServerNames –≤–∞—à –¥–æ–º–µ–Ω (Self SNI)
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω
- ‚úÖ –ü–æ—Ä—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ SNI —Å –∫–ª–∏–µ–Ω—Ç–∞

**–í–∞–∂–Ω–æ**: DPI/–†–ö–ù –ø—Ä–æ–≤–µ—Ä—è—é—Ç SNI –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤–∞—à –¥–æ–º–µ–Ω, –∞ –Ω–µ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞.

**Windows (PowerShell):**
```powershell
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SNI –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
$tcpClient = New-Object System.Net.Sockets.TcpClient("–≤–∞—à_—Å–µ—Ä–≤–µ—Ä", 443)
$sslStream = New-Object System.Net.Security.SslStream($tcpClient.GetStream())
$sslStream.AuthenticateAsClient("ses-1.onesuper.ru")
$sslStream.Close()
$tcpClient.Close()
```

**Linux/Mac:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SNI
openssl s_client -connect –≤–∞—à_—Å–µ—Ä–≤–µ—Ä:443 -servername ses-1.onesuper.ru
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- SNI –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤–∞—à –¥–æ–º–µ–Ω (`ses-1.onesuper.ru`)
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–º–µ–Ω–∞
- TLS handshake –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ Chrome

### –ü—Ä–æ–≤–µ—Ä–∫–∞ TLS fingerprint

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
1. https://tls.browserleaks.com/json - –ø—Ä–æ–≤–µ—Ä–∫–∞ TLS fingerprint
2. https://www.ssllabs.com/ssltest/ - –ø—Ä–æ–≤–µ—Ä–∫–∞ SSL/TLS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- TLS fingerprint –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å Chrome
- Cipher suites –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–∞–∫ —É Chrome
- TLS –≤–µ—Ä—Å–∏—è: 1.2 –∏–ª–∏ 1.3

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ (Wireshark/tcpdump)

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
```bash
# –ó–∞—Ö–≤–∞—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –ø–æ—Ä—Ç—É 443
sudo tcpdump -i any -n -A 'tcp port 443' -w reality-traffic.pcap

# –ê–Ω–∞–ª–∏–∑
# –í Wireshark –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
# - SNI –≤ TLS handshake
# - TLS fingerprint
# - –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ)
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- SNI —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—à –¥–æ–º–µ–Ω
- TLS handshake –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–π HTTPS
- –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω
- –ù–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ VPN-–ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞

**–ò–∑–≤–Ω–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –¥—Ä—É–≥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞/–∫–æ–º–ø—å—é—Ç–µ—Ä–∞
curl -I https://ses-1.onesuper.ru
curl -v https://ses-1.onesuper.ru 2>&1 | grep -i "server certificate"
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω
- –°–∞–π—Ç –æ—Ç–¥–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (–Ω–µ –æ—à–∏–±–∫–∏)

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã

‚úÖ **–í—Å–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
1. Reality –≤–∫–ª—é—á–µ–Ω (`"security": "reality"`)
2. Chrome fingerprint (`"fingerprint": "chrome"`)
3. Self SNI (–≤–∞—à –¥–æ–º–µ–Ω, –Ω–µ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞)
4. –†–µ–∞–ª—å–Ω—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)
5. –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
6. TLS fingerprint —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å Chrome
7. SNI —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—à –¥–æ–º–µ–Ω

‚ö†Ô∏è **–ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å:**
- ‚ùå –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥ —á—É–∂–∏–µ –¥–æ–º–µ–Ω—ã (microsoft.com, apple.com –∏ —Ç.–¥.)
- ‚ùå –°–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π TLS fingerprint
- ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–∞–π—Ç

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

**–í–∞–∂–Ω–æ**: –†–µ–∞–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ –†–§ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –∫–ª—é—á–∏ Reality

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```bash
# –õ–æ–≥–∏ Xray
sudo tail -f /var/log/xray/access.log
sudo tail -f /var/log/xray/error.log

# –õ–æ–≥–∏ Nginx
sudo tail -f /var/log/nginx/selfsni-error.log
```

**–ü—Ä–∏–∑–Ω–∞–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:**
- –†–µ–∑–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –¢–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- –û—à–∏–±–∫–∏ TLS handshake
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ IP –∞–¥—Ä–µ—Å—É —Å–µ—Ä–≤–µ—Ä–∞

## Firewall –ø—Ä–∞–≤–∏–ª–∞

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

- ‚úÖ **Ping –æ—Ç–∫–ª—é—á–µ–Ω** (ICMP –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è)
- ‚úÖ **–ü–æ—Ä—Ç 443 –æ—Ç–∫—Ä—ã—Ç** (Xray Reality)
- ‚úÖ **–ü–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç** (Let's Encrypt)
- ‚úÖ **–ü–æ—Ä—Ç Pasarguard Node –æ—Ç–∫—Ä—ã—Ç**
- ‚úÖ **SSH –ø–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç**
- ‚ùå **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –∑–∞–∫—Ä—ã—Ç—ã**

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **SSH –ø–æ—Ä—Ç**: –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç SSH –ø–æ—Ä—Ç –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –µ–≥–æ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã —á–µ—Ä–µ–∑ —ç—Ç–æ—Ç –ø–æ—Ä—Ç –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º!

2. **Ping**: Ping –æ—Ç–∫–ª—é—á–µ–Ω —á–µ—Ä–µ–∑ iptables. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å:
   ```bash
   iptables -D INPUT -p icmp --icmp-type echo-request -j DROP
   ```

3. **–ü–æ—Ä—Ç—ã**: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã:
   ```bash
   sudo ufw allow PORT/tcp
   ```

## –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å nginx
sudo systemctl stop nginx

# –£–¥–∞–ª–∏—Ç—å Pasarguard Node
sudo pg-node uninstall

# –°–±—Ä–æ—Å–∏—Ç—å firewall
sudo ufw --force reset
sudo ufw default allow incoming
sudo ufw enable
```

